# å…¬å‹ŸåŸºé‡‘æŠ¥å‘Šè‡ªåŠ¨åŒ–é‡‡é›†ä¸åˆ†æå¹³å°

[![CI/CD Pipeline](https://github.com/user/FundReportScraper/workflows/CI/CD%20Pipeline/badge.svg)](https://github.com/user/FundReportScraper/actions)
[![codecov](https://codecov.io/gh/user/FundReportScraper/branch/main/graph/badge.svg)](https://codecov.io/gh/user/FundReportScraper)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)

ä¸€ä¸ªè‡ªåŠ¨åŒ–é‡‡é›†ã€è§£æå’Œåˆ†æä¸­å›½å…¬å‹ŸåŸºé‡‘å®šæœŸæŠ¥å‘Šçš„å¹³å°ï¼ŒåŸºäº Python 3.10+ å¼€å‘ï¼Œé‡‡ç”¨ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹æ€§

- **è‡ªåŠ¨åŒ–é‡‡é›†**: ä»è¯ç›‘ä¼šä¿¡æ¯æŠ«éœ²å¹³å°è‡ªåŠ¨é‡‡é›†åŸºé‡‘æŠ¥å‘Š
- **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒ XBRLã€PDFã€HTML ç­‰å¤šç§æŠ¥å‘Šæ ¼å¼
- **åˆ†å¸ƒå¼æ¶æ„**: åŸºäº Celery + Redis çš„ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ
- **æ•°æ®æŒä¹…åŒ–**: PostgreSQL å­˜å‚¨ç»“æ„åŒ–æ•°æ®ï¼ŒMinIO å­˜å‚¨åŸå§‹æ–‡ä»¶
- **é«˜è´¨é‡ä»£ç **: 80%+ æµ‹è¯•è¦†ç›–ç‡ï¼Œç»“æ„åŒ–æ—¥å¿—ï¼Œå®Œæ•´çš„CI/CDæµç¨‹
- **RESTful API**: FastAPI æä¾›é«˜æ€§èƒ½çš„æ•°æ®æŸ¥è¯¢æ¥å£

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **åç«¯æ¡†æ¶**: FastAPI (Python 3.10+)
- **æ•°æ®åº“**: PostgreSQL 14+ with SQLAlchemy 2.0
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery + Redis
- **å¯¹è±¡å­˜å‚¨**: MinIO (S3å…¼å®¹)
- **HTTPå®¢æˆ·ç«¯**: httpx (å¼‚æ­¥æ”¯æŒ)
- **æ•°æ®è§£æ**: arelle (XBRL), lxml, BeautifulSoup4
- **æ—¥å¿—ç³»ç»Ÿ**: Structlog (ç»“æ„åŒ–JSONæ—¥å¿—)
- **æµ‹è¯•æ¡†æ¶**: Pytest (åŒ…å«å¼‚æ­¥æµ‹è¯•)
- **å®¹å™¨åŒ–**: Docker + Docker Compose

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI       â”‚    â”‚  Celery Beat    â”‚    â”‚  Celery Worker  â”‚
â”‚   (API Layer)   â”‚    â”‚  (Scheduler)    â”‚    â”‚  (Task Executor)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚    â”‚      Redis      â”‚    â”‚     MinIO       â”‚
â”‚ (Structured DB) â”‚    â”‚ (Message Queue) â”‚    â”‚ (File Storage)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Docker & Docker Compose
- Poetry (æ¨è) æˆ– pip

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd FundReportScraper
```

2. **ä¸€é”®ç¯å¢ƒè®¾ç½®**
```bash
# æ‰§è¡Œè‡ªåŠ¨åŒ–è®¾ç½®è„šæœ¬
./setup_dev.sh
```

3. **æ‰‹åŠ¨è®¾ç½® (å¯é€‰)**
```bash
# å®‰è£…ä¾èµ–
poetry install

# å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env

# å¯åŠ¨åŸºç¡€æœåŠ¡
docker-compose -f docker-compose.dev.yml up -d

# è¿è¡Œæ•°æ®åº“è¿ç§»
poetry run alembic upgrade head
```

4. **å¯åŠ¨åº”ç”¨**
```bash
# å¯åŠ¨FastAPIåº”ç”¨
poetry run uvicorn src.main:app --reload

# æˆ–ä½¿ç”¨Docker (å®Œæ•´æœåŠ¡)
docker-compose up
```

### éªŒè¯å®‰è£…

```bash
# è¿è¡Œæµ‹è¯•
./run_tests.sh

# æ£€æŸ¥APIçŠ¶æ€
curl http://localhost:8000/health

# æŸ¥çœ‹APIæ–‡æ¡£
open http://localhost:8000/docs
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### APIæ¥å£

è®¿é—® `http://localhost:8000/docs` æŸ¥çœ‹å®Œæ•´çš„APIæ–‡æ¡£ã€‚

ä¸»è¦æ¥å£ï¼š
- `GET /health` - å¥åº·æ£€æŸ¥
- `POST /tasks/scraping` - åˆ›å»ºçˆ¬å–ä»»åŠ¡
- `GET /tasks/{task_id}` - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
- `GET /reports` - æŸ¥è¯¢åŸºé‡‘æŠ¥å‘Š
- `GET /funds` - æŸ¥è¯¢åŸºé‡‘åˆ—è¡¨

### åˆ›å»ºçˆ¬å–ä»»åŠ¡ç¤ºä¾‹

```bash
curl -X POST "http://localhost:8000/tasks/scraping" \
  -H "Content-Type: application/json" \
  -d '{
    "task_name": "2023å¹´å¹´æŠ¥çˆ¬å–",
    "target_year": 2023,
    "report_type": "ANNUAL"
  }'
```

### æŸ¥è¯¢æŠ¥å‘Šæ•°æ®

```bash
# æŸ¥è¯¢æŒ‡å®šåŸºé‡‘çš„æŠ¥å‘Š
curl "http://localhost:8000/reports?fund_code=000001&year=2023"

# æŸ¥è¯¢åŸºé‡‘åˆ—è¡¨
curl "http://localhost:8000/funds?search=åå¤"
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

é¡¹ç›®å¼ºåˆ¶æ‰§è¡Œä»¥ä¸‹è§„èŒƒï¼š

- **æ—¥å¿—è®°å½•**: å¿…é¡»ä½¿ç”¨ Structlogï¼Œç¦æ­¢ `print()` è¯­å¥
- **æµ‹è¯•è¦†ç›–ç‡**: æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ä¸ä½äº 80%
- **ä»£ç æ ¼å¼**: Black + isort + Flake8
- **ç±»å‹æ£€æŸ¥**: MyPy (å»ºè®®)

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
poetry run pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
poetry run pytest tests/unit/test_fund_scraper.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
poetry run pytest --cov=src --cov-report=html
```

### ä»£ç æ£€æŸ¥

```bash
# æ ¼å¼åŒ–ä»£ç 
poetry run black src tests

# æ’åºå¯¼å…¥
poetry run isort src tests

# ä»£ç æ£€æŸ¥
poetry run flake8 src tests

# ç±»å‹æ£€æŸ¥
poetry run mypy src
```

### æ•°æ®åº“è¿ç§»

```bash
# åˆ›å»ºæ–°è¿ç§»
poetry run alembic revision --autogenerate -m "æè¿°å˜æ›´"

# åº”ç”¨è¿ç§»
poetry run alembic upgrade head

# å›æ»šè¿ç§»
poetry run alembic downgrade -1
```

## ğŸ“Š é¡¹ç›®çŠ¶æ€

### å¼€å‘è¿›åº¦

- âœ… **é˜¶æ®µä¸€ (W1-W3)**: åŸºç¡€æ¶æ„ä¸æ ¸å¿ƒçˆ¬å–åŠŸèƒ½
  - âœ… ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åˆå§‹åŒ–
  - âœ… æ•°æ®åº“æ¨¡å‹è®¾è®¡
  - âœ… æ ¸å¿ƒçˆ¬è™«å®ç°
  - âœ… æ–‡ä»¶å­˜å‚¨åŠŸèƒ½
  - âœ… å•å…ƒæµ‹è¯• (80%+ è¦†ç›–ç‡)

- ğŸš§ **é˜¶æ®µäºŒ (W4-W6)**: æ•°æ®è§£æä¸å…¥åº“ (è®¡åˆ’ä¸­)
- ğŸš§ **é˜¶æ®µä¸‰ (W7-W8)**: ä»»åŠ¡è°ƒåº¦ä¸å¥å£®æ€§ (è®¡åˆ’ä¸­)
- ğŸš§ **é˜¶æ®µå›› (W9-W10)**: éƒ¨ç½²ä¸API (è®¡åˆ’ä¸­)
- ğŸš§ **é˜¶æ®µäº” (W11-W12)**: éªŒæ”¶ä¸ä¸Šçº¿ (è®¡åˆ’ä¸­)

### å½“å‰åŠŸèƒ½

- âœ… ç»“æ„åŒ–æ—¥å¿—è®°å½•
- âœ… HTTPå®¢æˆ·ç«¯ä¸é”™è¯¯å¤„ç†
- âœ… è¯·æ±‚é¢‘ç‡é™åˆ¶
- âœ… åŸºé‡‘æŠ¥å‘Šåˆ—è¡¨è·å–
- âœ… æ–‡ä»¶ä¸‹è½½ä¸å­˜å‚¨
- âœ… RESTful APIæ¥å£
- âœ… æ•°æ®åº“è¿æ¥ä¸ORM
- âœ… Dockerå®¹å™¨åŒ–éƒ¨ç½²

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤å˜æ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### Pull Request è¦æ±‚

- æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡
- ä»£ç è¦†ç›–ç‡ä¸å¾—é™ä½
- éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒ
- åŒ…å«å¿…è¦çš„æ–‡æ¡£æ›´æ–°

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ”¯æŒä¸è”ç³»

- é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/user/FundReportScraper/issues)
- æŠ€æœ¯æ–‡æ¡£: [é¡¹ç›®Wiki](https://github.com/user/FundReportScraper/wiki)
- é‚®ä»¶è”ç³»: dev@example.com

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v0.1.0 (2025-07-12)
- âœ¨ é¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€æ¶æ„æ­å»º
- âœ¨ æ ¸å¿ƒçˆ¬è™«åŠŸèƒ½å®ç°
- âœ¨ æ•°æ®åº“æ¨¡å‹è®¾è®¡
- âœ¨ MinIOæ–‡ä»¶å­˜å‚¨é›†æˆ
- âœ¨ FastAPI RESTæ¥å£
- âœ¨ å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- âœ¨ CI/CDæµç¨‹é…ç½®

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·éµå®ˆç›¸å…³ç½‘ç«™çš„robots.txtå’Œä½¿ç”¨æ¡æ¬¾ã€‚